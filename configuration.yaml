homeassistant:
  # Name of the location where Home Assistant is running
  name: Home
  # Location required to calculate the time the sun rises and sets
  latitude: !secret home_latitude 
  longitude: !secret home_longitude
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: !secret home_elevation
  # metric for Metric, imperial for Imperial
  unit_system: imperial
  country: US
  currency: USD
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: America/Denver
  # Customization file
  customize: !include customize.yaml
  customize_domain: !include customize_domain.yaml
  internal_url: !secret http_internal_url
  external_url: !secret http_external_url
  # included for keymaster
  packages: !include_dir_named packages
  allowlist_external_dirs:
   - /config

# Show links to resources in log and frontend
# introduction:

# Enables the frontend
frontend:
  themes: !include themes.yaml

lovelace:
#  mode: yaml
# Enables configuration UI
config:

http:
  # Secrets are defined in the file secrets.yaml
  #api_password: !secret http_password
  use_x_forwarded_for: true
  trusted_proxies:
    - 127.0.0.1
system_health:

mobile_app:

zeroconf:

energy:

# Discover some devices automatically
#discovery:

# recorder:
#   exclude:
#     domains:
#       - alarm_control_panel
#       - automation 
#       - input_boolean
#       - remote 
#       - script
#       - binary_sensor
#       - climate
#       - cover
#       - device_tracker
#       - fan
#       - light
#       - lock
#       - media_player
#       - sensor
#       - switch
# Allows you to issue voice commands from the frontend in enabled browsers
#conversation:

# Enables support for tracking state changes over time
#history:

# View all events in a logbook
#logbook:

# Enables a map showing the location of tracked devices
map:

# Track the sun
sun:

# Text to speech
#tts:
#  - platform: google_translate
#    service_name: google_say 

# inputs
input_boolean:
input_datetime:
input_number:
input_select:
input_text:

# includes
group: !include groups.yaml
automation: !include_dir_merge_list automation/
script: !include scripts.yaml
switch: !include switches.yaml
sensor: !include_dir_merge_list sensors/
binary_sensor: !include binary_sensor.yaml
alexa: !include alexa.yaml
fan: !include fans.yaml
light: !include_dir_merge_list lights/
template: !include templates.yaml

#schluter
schluter:
  username: !secret schluter_username
  password: !secret schluter_password

# MQTT Broker Connection
mqtt:
  #broker: !secret mqtt_broker
  #discovery: True
  binary_sensor:
    - name: Driveway Camera Motion
      state_topic: "sensors/motion/camera/driveway"
      payload_on: "1"
      payload_off: "0"
  sensor:
    - name: "Gas Meter Consumption"
      state_topic: !secret gas_meter_topic
      value_template: "{{ value_json.Consumption }}"
      unit_of_measurement: 'ft³'
      device_class: 'gas'
      state_class: 'total_increasing'
      availability:
        - topic: "metermon/status"
          payload_available: "Online"
          payload_not_available: "Offline"
      json_attributes_topic: !secret gas_meter_topic
   # -  name: "Water Meter Consumption"
   #    state_topic: !secret water_meter_topic
   #    value_template: "{{ value_json.Consumption }}"
   #    unit_of_measurement: 'gal'
   #    #device_class:
   #    state_class: 'total_increasing'
   #    availability:
   #     - topic: "metermon/status"
   #       payload_available: "Online"
   #       payload_not_available: "Offline"
   #    json_attributes_topic: !secret water_meter_topic
    - name: "Airthings Basement Enthalpy"
      state_topic: "airthings/d8:71:4d:96:08:7f/enthalpy"
      unit_of_measurement: 'kJ/kg'
    - name: "Bedroom Humidity"
      state_topic: "sensors/D1_Mini_02/humiditySHT30"
      unit_of_measurement: '%'
    - name: "Bedroom Temperature"
      state_topic: "sensors/D1_Mini_02/temperatureSHT30"
      unit_of_measurement: '°F'
    - name: "Bedroom Enthalpy"
      state_topic: "sensors/D1_Mini_02/enthalpySHT30"
      unit_of_measurement: 'kJ/kg'
    - name: "Garage Humidity"
      state_topic: "sensors/D1_Mini_03/humiditySHT30"
      unit_of_measurement: '%'
    - name: "Garage Temperature"
      state_topic: "sensors/D1_Mini_03/temperatureSHT30"
      unit_of_measurement: '°F'
    - name: "Garage Enthalpy"
      state_topic: "sensors/D1_Mini_03/enthalpySHT30"
      unit_of_measurement: 'kJ/kg'
    - name: "Attic Humidity"
      state_topic: "sensors/D1_Mini_04/humiditySHT30"
      unit_of_measurement: '%'
    - name: "Attic Temperature"
      state_topic: "sensors/D1_Mini_04/temperatureSHT30"
      unit_of_measurement: '°F'
    - name: "Attic Enthalpy"
      state_topic: "sensors/D1_Mini_04/enthalpySHT30"
      unit_of_measurement: 'kJ/kg'
    - name: "Living Room Humidity"
      state_topic: "sensors/D1_Mini_05/humiditySHT30"
      unit_of_measurement: '%'
    - name: "Living Room Temperature"
      state_topic: "sensors/D1_Mini_05/temperatureSHT30"
      unit_of_measurement: '°F'
    - name: "Living Room Enthalpy"
      state_topic: "sensors/D1_Mini_05/enthalpySHT30"
      unit_of_measurement: 'kJ/kg'
    - name: "Loft Humidity"
      state_topic: "sensors/D1_Mini_06/humiditySHT30"
      unit_of_measurement: '%'
    - name: "Loft Temperature"
      state_topic: "sensors/D1_Mini_06/temperatureSHT30"
      unit_of_measurement: '°F'
    - name: "Loft Enthalpy"
      state_topic: "sensors/D1_Mini_06/enthalpySHT30"
      unit_of_measurement: 'kJ/kg'
    - name: "Kitchen Humidity"
      state_topic: "sensors/D1_Mini_07/humiditySHT30"
      unit_of_measurement: '%'
    - name: "Kitchen Temperature"
      state_topic: "sensors/D1_Mini_07/temperatureSHT30"
      unit_of_measurement: '°F'
    - name: "Kitchen Enthalpy"
      state_topic: "sensors/D1_Mini_07/enthalpySHT30"
      unit_of_measurement: 'kJ/kg'
    - name: "Safe Humidity"
      state_topic: "sensors/D1_Mini_08/humiditySHT30"
      unit_of_measurement: '%'
    - name: "Safe Temperature"
      state_topic: "sensors/D1_Mini_08/temperatureSHT30"
      unit_of_measurement: '°F'
    - name: "Safe Enthalpy"
      state_topic: "sensors/D1_Mini_08/enthalpySHT30"
      unit_of_measurement: 'kJ/kg'
    - name: "Guest Room Humidity"
      state_topic: "sensors/D1_Mini_09/humiditySHT30"
      unit_of_measurement: '%'
    - name: "Guest Room Temperature"
      state_topic: "sensors/D1_Mini_09/temperatureSHT30"
      unit_of_measurement: '°F'
    - name: "Guest Room Enthalpy"
      state_topic: "sensors/D1_Mini_09/enthalpySHT30"
      unit_of_measurement: 'kJ/kg'
    - name: "Office Temperature"
      state_topic: "sensors/multisensor"
      unit_of_measurement: "°F"
      value_template: "{{value_json['Si7021']['Temperature']}}"
    - name: "Office Humidity"
      state_topic: "sensors/multisensor"
      unit_of_measurement: "%"
      value_template: "{{value_json['Si7021']['Humidity']}}"
    - name: "Office eCO2"
      state_topic: "sensors/multisensor"
      unit_of_measurement: "ppm"
      value_template: "{{value_json['CCS811']['eCO2']}}"
    - name: "Office TVOC"
      state_topic: "sensors/multisensor"
      unit_of_measurement: "ppb"
      value_template: "{{value_json['CCS811']['TVOC']}}"
    - name: "Office Enthalpy"
      state_topic: "sensors/multisensor/enthalpySi7021"
      unit_of_measurement: 'kJ/kg'

device_tracker:
  - platform: google_maps
    username: !secret google_maps_account_1
  - platform: google_maps
    username: !secret google_maps_account_2

# camera:
#   - platform: local_file
#     file_path: /tmp/driveway_cam_doods_latest.jpg
#     name: "Driveway Cam Objects Detected"
#   - platform: local_file
#     file_path: /tmp/backyard_cam_doods_latest.jpg
#     name: "Backyard Cam Objects Detected"
#  - platform: local_file
#    file_path: /config/www/doods_test_image.jpg
#    name: "Doods Test Image"
#  - platform: local_file
#    file_path: /tmp/doods_test_image_doods_latest.jpg
#    name: "Doods Test Image Objects Detected"

# image_processing:
#   - platform: doods
#     scan_interval: 10000
#     url: !secret doods_url
#     timeout: 60
#     detector: default
#     source:
#       - entity_id: camera.driveway_cam
#       - entity_id: camera.backyard_cam
# #      - entity_id: camera.doods_test_image
#     file_out:
#       - "/tmp/{{ camera_entity.split('.')[1] }}_doods_latest.jpg"
#      # - "/tmp/{{ camera_entity.split('.')[1] }}_{{ now().strftime('%Y%m%d_%H%M%S') }}.jpg"
#     confidence: 75
#     labels:
#       - person
#       - bicycle
#       #- car
#       - motorcycle
#       - truck
#       - bird
#       - cat
#       - dog
#       - chair
#       - couch

# enable WOL integration    
wake_on_lan:    

utility_meter:
  daily_electricity:
    source: sensor.smart_electric_meter_consumption
    name: Daily Electricity Usage
    cycle: daily
  monthly_electricity:
    source: sensor.smart_electric_meter_consumption
    name: Monthly Electricity Usage
    cycle: monthly
    offset:
    # At least one of these must be specified:
      days: 13
      hours: 0
      minutes: 0
  daily_gas:
    source: sensor.gas_meter_consumption
    name: Daily Gas Usage
    cycle: daily
  monthly_gas:
    source: sensor.gas_meter_consumption
    name: Monthly Gas Usage
    cycle: monthly
    offset:
    # At least one of these must be specified:
      days: 13
      hours: 0
      minutes: 0
  daily_jag_mileage:
    source: sensor.the_jag_odometer
    name: Daily Jag Mileage
    cycle: daily
  monthly_jag_mileage:
    source: sensor.the_jag_odometer
    name: Monthly Jag Mileage
    cycle: monthly

influxdb:
  api_version: 2
  ssl: false
  host: !secret influxdb_host
  port: 8086
  verify_ssl: false
  token: !secret influxdb_token
  organization: Auffinger
  bucket: home_assistant/autogen
  max_retries: 3
  #default_measurement: state
  # exclude:
  #   entities:
  #      - entity.id1
  #      - entity.id2
  #   domains:
  #      - automation
  include:
    entities:
       - device_tracker.pixel_3
       - device_tracker.sean_s_s20
       - device_tracker.the_jag
       - sensor.airthings_basement_co2
       - sensor.airthings_basement_enthalpy
       - sensor.airthings_basement_humidity
       - sensor.airthings_basement_pressure
       - sensor.airthings_basement_radon_1_day_avg
       - sensor.airthings_basement_radon_longterm_avg
       - sensor.airthings_basement_temperature
       - sensor.airthings_basement_voc
       - sensor.bedroom_humidity
       - sensor.bedroom_temperature
       - sensor.bedroom_enthalpy
       - sensor.dcp_l2550dw_black_toner_remaining
       - sensor.dcp_l2550dw_drum_remaining_life
       - sensor.dcp_l2550dw_page_counter
       - sensor.dexcom_glucose_value
       - sensor.diskstation_network_down
       - sensor.diskstation_network_up
       - sensor.ecobee_thermostat_current_humidity
       - sensor.ecobee_thermostat_current_temperature
       - sensor.ecobee_upstairs_sensor_battery
       - sensor.ecobee_upstairs_sensor_temperature
       - sensor.garage_humidity
       - sensor.garage_temperature
       - sensor.garage_enthalpy
       - sensor.gas_meter_consumption
       - sensor.guest_room_enthalpy
       - sensor.guest_room_humidity
       - sensor.guest_room_temperature
       - sensor.hs110_1_power
       - sensor.hs110_2_power
       - sensor.hs110_3_power
       - sensor.hs110_1_today_s_consumption
       - sensor.hs110_2_today_s_consumption
       - sensor.hs110_3_today_s_consumption
       - sensor.hs110_1_total_consumption
       - sensor.hs110_2_total_consumption
       - sensor.hs110_3_total_consumption
       - sensor.kitchen_humidity
       - sensor.kitchen_temperature
       - sensor.kitchen_enthalpy
       - sensor.living_room_humidity
       - sensor.living_room_temperature
       - sensor.living_room_enthalpy
       - sensor.loft_humidity
       - sensor.loft_temperature
       - sensor.loft_enthalpy
       - sensor.lower_attic_humidity
       - sensor.lower_attic_temperature
       - sensor.lower_attic_enthalpy
       - sensor.myip
       - sensor.office_enthalpy
       - sensor.office_humidity
       - sensor.office_temperature
       - sensor.office_tvoc
       - sensor.phase_1_power
       - sensor.phase_2_power
       - sensor.safe_humidity
       - sensor.safe_temperature
       - sensor.safe_enthalpy
       - sensor.smart_electric_meter_consumption
       - sensor.smart_electric_meter_power
       - sensor.smart_electric_meter_return
       - sensor.speedtest_download
       - sensor.speedtest_upload
       - sensor.the_jag_battery
       - sensor.the_jag_battery_soc_kwh
       - sensor.the_jag_odometer
       - sensor.the_jag_range
       - sensor.the_jag_tyres
       - sensor.the_jag_last_trip
       - sensor.total_power
       - sensor.touchscreen_deadbolt_z_wave_plus_battery_level
       - sensor.u_s_air_quality_index
       - sensor.ups_battery_charge
       - sensor.ups_battery_runtime
       - sensor.ups_load
       - sensor.upstairs_aq_pm_10um_mass_concentration
       - sensor.upstairs_aq_pm_1um_mass_concentration
       - sensor.upstairs_aq_pm_2_5um_mass_concentration
       - sensor.upstairs_aq_pm_4um_mass_concentration
       - sensor.upstairs_aq_radiation_cpm
       - sensor.upstairs_aq_radiation_dose_rate
       - sensor.upstairs_aq_total_radiation_counts
       - sensor.water_meter_consumption
       - sun.sun
  